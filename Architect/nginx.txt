nginx.txt


负载均衡。tornado之类的框架只支持单核，所以多进程部署需要反向负载均衡。gunicorn本身就是多进程其实不需要静态文件支持，经过配置之后，nginx可以直接处理静态文件请求而不用经过Python服务器，Python服务器也可以返回特殊的http头将请求rewrite到静态文件。我说的是经过配置之后，你配置了吗？抗并发压力。虽然不能提升qps，但是多一层前端，的确可以吸收一些瞬时的并发请求，让nginx先保持住连接，然后后端慢慢消化，但说实话这种情况下服务体验已经很糟糕了。但的确比服务挂掉强一些。

nginx可以缓冲请求和响应。如果让Gunicorn直接提供服务，浏览器发起一个请求，鉴于浏览器和网络情况都是未知的，http请求的发起过程可能比较慢，而Gunicorn只能等待请求发起完成后，才去真正处理请求，处理完成后，等客户端完全接收请求后，才继续下一个。nginx缓存客户端发起的请求，直到收完整个请求，转发给Gunicorn，等Gunicorn处理完成后，拿到响应，再发给客户端，这个流程是nginx擅长处理，而Gunicorn不擅长处理的。

1.负载均衡，nginx占用80端口，g可以占用多个非80端口;
2.拦截静态请求;
3.伪静态化并缓存，减少动态请求数量;
4.依赖于nginx强大的功能和性能，可以做访问控制，限速，限连接数等等;

